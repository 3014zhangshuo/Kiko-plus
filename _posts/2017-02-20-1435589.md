---
layout: post
title: 'è®°å½•:åé¦ˆç³»ç»Ÿ'
date: 2017-02-20 21:23
comments: true
categories: 
---
```
<div class="center_block hide" id="flash-notice"><p class="feedback_notice">æ„Ÿè°¢æ‚¨çš„åé¦ˆğŸ˜Š</p></div>
<div class="feedback">
	<hr>
	<h5>å¯¹è¿™ä¸€æ­¥éª¤æ„Ÿå—å¦‚ä½•â“</h5>
	<input type="radio" name="button" value="feedback" id="nice-feedback"><span style="font-size: 1.2em;">&nbsp;ğŸ˜„ &nbsp;å¾ˆæ£’</span></input>&nbsp;
	<input type="radio" name="button" value="feedback" id="common-feedback"><span style="font-size: 1.2em;">&nbsp;ğŸ˜ &nbsp;è¿˜å¯ä»¥</span></input>&nbsp;
  <input type="radio" name="button" id="bad-feedback" ><span style="font-size: 1.2em;">&nbsp;ğŸ˜­ &nbsp;å¾ˆç³Ÿç³•</span></input>&nbsp;
	<button type="button" name="button" id="content-feedback">ç›´æ¥åæ§½</button>
</div>
	</div>
</div>

<!-- Modal -->  å¾ˆç³Ÿç³•çš„å‡ºç°çš„modal
 <div class="modal fade in" id="getCodeModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
   <div class="modal-dialog">
      <div class="modal-content">
       <div class="modal-header">
       <h4 class="modal-title center_block" id="myModalLabel">åæ§½</h4>
       </div>
			 <div class="container center_block">
       <div class="col-md-6">
      <textarea name="name" rows="8" cols="60" class="form-control" placeholder="æ„Ÿè°¢æ‚¨çš„æ„è§" id="getCode"></textarea>
      <input type="submit" name="commit" value="åæ§½" class="btn btn-primary btn-sm center_block" id="submit">
			       </div>
				 </div>
    </div>
   </div>
 </div>

<!-- only feedback content  -->ç›´æ¥åæ§½çš„html

<div class="modal fade in" id="direct-wirte" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
		 <div class="modal-content">
			<div class="modal-header">
			<h4 class="modal-title center_block">åæ§½</h4>
			</div>
			<div class="container center_block">
			<div class="col-md-6">
		 <textarea name="name" rows="8" cols="60" class="form-control" placeholder="æ„Ÿè°¢æ‚¨çš„æ„è§" id="getDirect"></textarea>
		 <input type="radio" name="score" value="1" id="nice-feedback">1åˆ†</input>
		 <input type="radio" name="score" value="2" id="common-feedback">2åˆ†</input>
 		 <input type="radio" name="score" value="3" id="bad-feedback" >3åˆ†</input>
		 <br>
		 <input type="submit" name="commit" value="åæ§½" class="btn btn-primary btn-sm center_block" id="direct-submit">
						</div>
				</div>
	 </div>
	</div>
</div>
```
```
$('#bad-feedback').click(function (event) {
	$("#getCodeModal").modal("toggle");             ç‚¹å‡»è§¦å‘æ¨¡æ€æ¡†
	$('#submit').attr('disabled', true);
	$('textarea#getCode').on('keyup',function() {
    var textarea_value = $("#getCode").val();    æŸ¥çœ‹textareaæœ‰æ²¡æœ‰è¾“å…¥å€¼ï¼Œæ²¡æœ‰åˆ™buttonä¸ºdisableï¼Œ
    if(textarea_value != '') {                   æœ‰åˆ™ä¸ºable
        $('#submit').attr('disabled' , false);
    }else{
        $('#submit').attr('disabled' , true);
    }
});
	$('#submit').click(function (event) {
		event.preventDefault();
		var message = $("textarea#getCode").val();   feedbackçš„contentä¸ºtextareaçš„è¾“å…¥å€¼
		$.ajax({
				url: '/feedbacks/ajax_create_feedback/', è¿™é‡Œæ˜¯åœ¨åç¼€ä¸ºjsæ–‡ä»¶å†™æ³•
				type: 'post',
				data: {
					  step : "resume_white_step_1",   ä¸Šä¼ feedbackçš„å‚æ•°
						score: 1,
						content: message
				},
				success: function (result) {
        $('#getCodeModal').modal('hide');     submitå modalæ¡†æ¶ˆå¤±
				$('.feedback').remove();               ç§»èµ°feedbackæ¨¡å—
				$('#flash-notice').removeClass("hide"); æ˜¾ç¤ºflash
				$('#flash-notice').fadeOut(3000);       æ·¡å‡ºflash
				}
		});
		return false;
});
});

$('#content-feedback').click(function (event) {
	$("#direct-wirte").modal("toggle");
	$('#direct-submit').attr('disabled', true);
	$('textarea#getDirect').on('keyup',function() {
    var textarea_value = $("#getDirect").val();
    if(textarea_value != '') {
        $('#direct-submit').attr('disabled' , false);
    }else{
        $('#direct-submit').attr('disabled' , true);
    }
});
	$('#direct-submit').click(function (event) {
		event.preventDefault();
		var message = $("textarea#getDirect").val();
		var score = $("input[name='score']:checked").val();     ä¸Šä¼ åˆ†æ•°çš„å€¼
		$.ajax({
				url: '/feedbacks/ajax_create_feedback/',
				type: 'post',
				data: {
					  step : "resume_white_step_1",
						score: score,
						content: message
				},
				success: function (result) {
        $('#direct-wirte').modal('hide');
				$('.feedback').remove();
				$('#flash-notice').removeClass("hide");
				$('#flash-notice').fadeOut(3000);
				}
		});
		return false;
});
});
```